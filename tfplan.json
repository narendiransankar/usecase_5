{"format_version":"1.2","terraform_version":"1.12.2","variables":{"destination_bucket_name":{"value":"image-hcl-test-apsouth1-processed-destination"},"lambda_function_name":{"value":"image-processing-lambda"},"notification_email":{"value":"narendiran.sankar@hcltech.com"},"runtime":{"value":"python3.9"},"sns_topic_name":{"value":"image-processing-updates"},"source_bucket_name":{"value":"image-hcl-test-apsouth1-upload-source"}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.lambda.aws_iam_policy.lambda_extended_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"lambda-s3-sns-policy","path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.lambda.aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"lambda_exec_role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"role_last_used":[],"tags_all":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_extended_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}},{"address":"module.lambda.aws_lambda_permission.allow_s3","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":null,"source_account":null,"statement_id":"AllowExecutionFromS3"},"sensitive_values":{}}],"address":"module.lambda"},{"resources":[{"address":"module.s3.aws_s3_bucket.destination","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"image-hcl-test-apsouth1-processed-destination","force_destroy":false,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.s3.aws_s3_bucket.source","mode":"managed","type":"aws_s3_bucket","name":"source","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"image-hcl-test-apsouth1-upload-source","force_destroy":false,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.s3.aws_s3_bucket_notification.lambda_trigger","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"eventbridge":false,"lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":null,"filter_suffix":null}],"queue":[],"topic":[]},"sensitive_values":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]}}],"address":"module.s3"},{"resources":[{"address":"module.sns.aws_sns_topic.notifications","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"image-processing-updates","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.sns.aws_sns_topic_subscription.email","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"subscription_role_arn":null},"sensitive_values":{}}],"address":"module.sns"}]}},"resource_changes":[{"address":"module.lambda.aws_iam_policy.lambda_extended_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"lambda-s3-sns-policy","path":"/","tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.lambda.aws_iam_role.lambda_exec","module_address":"module.lambda","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"lambda_exec_role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"role_last_used":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"role_last_used":[],"tags_all":{}}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_extended_attachment","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"lambda_exec_role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.lambda.aws_lambda_function.image_processor","module_address":"module.lambda","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"after_unknown":{"architectures":true,"arn":true,"dead_letter_config":[],"environment":[{"variables":true}],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"layers":[false],"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":true,"tracing_config":true,"version":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}}},{"address":"module.lambda.aws_lambda_permission.allow_s3","module_address":"module.lambda","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":null,"source_account":null,"statement_id":"AllowExecutionFromS3"},"after_unknown":{"id":true,"source_arn":true,"statement_id_prefix":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.s3.aws_s3_bucket.destination","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"image-hcl-test-apsouth1-processed-destination","force_destroy":false,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.s3.aws_s3_bucket.source","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket","name":"source","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"image-hcl-test-apsouth1-upload-source","force_destroy":false,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.s3.aws_s3_bucket_notification.lambda_trigger","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"eventbridge":false,"lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":null,"filter_suffix":null}],"queue":[],"topic":[]},"after_unknown":{"bucket":true,"id":true,"lambda_function":[{"events":[false],"id":true,"lambda_function_arn":true}],"queue":[],"topic":[]},"before_sensitive":false,"after_sensitive":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]}}},{"address":"module.sns.aws_sns_topic.notifications","module_address":"module.sns","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"image-processing-updates","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags_all":true,"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.sns.aws_sns_topic_subscription.email","module_address":"module.sns","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"subscription_role_arn":null},"after_unknown":{"arn":true,"confirmation_was_authenticated":true,"filter_policy_scope":true,"id":true,"owner_id":true,"pending_confirmation":true,"topic_arn":true},"before_sensitive":false,"after_sensitive":{}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.12.2","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.lambda.data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_name":"registry.terraform.io/hashicorp/archive","schema_version":0,"values":{"exclude_symlink_directories":null,"excludes":null,"id":"9a25d34f65f3fc8fb3bfa4cb4a2923f34441beb1","output_base64sha256":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","output_base64sha512":"OImiTN+fK1gTbOxMHuAnuqkH3IO3zVj1dES6mwlxcS0e4DwP+XKThLiu1TZa72Kur//iRFKd/3I8YtHwTaY7cg==","output_file_mode":null,"output_md5":"2c651ad748f881ff4db1608c045fa3bb","output_path":"modules/lambda/lambda_function_payload.zip","output_sha":"9a25d34f65f3fc8fb3bfa4cb4a2923f34441beb1","output_sha256":"aa5eb15a84b7d734422acde0eae3441b5fc6cae4650ec7352eb11b5cb347d8a8","output_sha512":"3889a24cdf9f2b58136cec4c1ee027baa907dc83b7cd58f57444ba9b0971712d1ee03c0ff9729384b8aed5365aef62aeafffe244529dff723c62d1f04da63b72","output_size":814,"source":[],"source_content":null,"source_content_filename":null,"source_dir":"modules/lambda/lambda_function_payload","source_file":null,"type":"zip"},"sensitive_values":{"source":[]}}],"address":"module.lambda"}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"~\u003e 2.2"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 4.0","expressions":{"region":{"constant_value":"ap-south-1"}}}},"root_module":{"module_calls":{"lambda":{"source":"./modules/lambda","expressions":{"destination_bucket_name":{"references":["var.destination_bucket_name"]},"handler_name":{"constant_value":"image_processor.lambda_handler"},"lambda_function_name":{"references":["var.lambda_function_name"]},"lambda_s3_trigger_arn":{"references":["module.s3.source_bucket_arn","module.s3"]},"runtime":{"references":["var.runtime"]},"sns_topic_arn":{"references":["module.sns.topic_arn","module.sns"]},"source_bucket_name":{"references":["var.source_bucket_name"]}},"module":{"outputs":{"allow_s3":{"expression":{"references":["aws_lambda_permission.allow_s3"]}},"lambda_function_arn":{"expression":{"references":["aws_lambda_function.image_processor.arn","aws_lambda_function.image_processor"]}}},"resources":[{"address":"aws_iam_policy.lambda_extended_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"lambda-s3-sns-policy"},"policy":{"references":["var.source_bucket_name","var.destination_bucket_name","var.sns_topic_arn"]}},"schema_version":0},{"address":"aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"lambda_exec_role"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_extended_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_extended_policy.arn","aws_iam_policy.lambda_extended_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["var.destination_bucket_name","var.sns_topic_arn"]}}],"filename":{"references":["data.archive_file.lambda_zip.output_path","data.archive_file.lambda_zip"]},"function_name":{"references":["var.lambda_function_name"]},"handler":{"references":["var.handler_name"]},"layers":{"constant_value":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"]},"role":{"references":["aws_iam_role.lambda_exec.arn","aws_iam_role.lambda_exec"]},"runtime":{"references":["var.runtime"]},"source_code_hash":{"references":["data.archive_file.lambda_zip.output_base64sha256","data.archive_file.lambda_zip"]}},"schema_version":0},{"address":"aws_lambda_permission.allow_s3","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["aws_lambda_function.image_processor.function_name","aws_lambda_function.image_processor"]},"principal":{"constant_value":"s3.amazonaws.com"},"source_arn":{"references":["var.lambda_s3_trigger_arn"]},"statement_id":{"constant_value":"AllowExecutionFromS3"}},"schema_version":0},{"address":"data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source_dir":{"references":["path.module"]},"type":{"constant_value":"zip"}},"schema_version":0}],"variables":{"destination_bucket_name":{},"handler_name":{},"lambda_function_name":{},"lambda_s3_trigger_arn":{},"runtime":{},"sns_topic_arn":{},"source_bucket_name":{}}}},"s3":{"source":"./modules/s3","expressions":{"destination_bucket_name":{"references":["var.destination_bucket_name"]},"lambda_function_arn":{"references":["module.lambda.lambda_function_arn","module.lambda"]},"lambda_permission_dependency":{"references":["module.lambda.allow_s3","module.lambda"]},"source_bucket_name":{"references":["var.source_bucket_name"]}},"module":{"outputs":{"source_bucket_arn":{"expression":{"references":["aws_s3_bucket.source.arn","aws_s3_bucket.source"]}}},"resources":[{"address":"aws_s3_bucket.destination","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_config_key":"aws","expressions":{"bucket":{"references":["var.destination_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket.source","mode":"managed","type":"aws_s3_bucket","name":"source","provider_config_key":"aws","expressions":{"bucket":{"references":["var.source_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket_notification.lambda_trigger","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.source.id","aws_s3_bucket.source"]},"lambda_function":[{"events":{"constant_value":["s3:ObjectCreated:*"]},"lambda_function_arn":{"references":["var.lambda_function_arn"]}}]},"schema_version":0,"depends_on":["aws_s3_bucket.source","var.lambda_permission_dependency"]}],"variables":{"destination_bucket_name":{},"lambda_function_arn":{},"lambda_permission_dependency":{"default":null},"source_bucket_name":{}}}},"sns":{"source":"./modules/sns","expressions":{"email_endpoint":{"references":["var.notification_email"]},"topic_name":{"references":["var.sns_topic_name"]}},"module":{"outputs":{"topic_arn":{"expression":{"references":["aws_sns_topic.notifications.arn","aws_sns_topic.notifications"]}}},"resources":[{"address":"aws_sns_topic.notifications","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_config_key":"aws","expressions":{"name":{"references":["var.topic_name"]}},"schema_version":0},{"address":"aws_sns_topic_subscription.email","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.email_endpoint"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.notifications.arn","aws_sns_topic.notifications"]}},"schema_version":0}],"variables":{"email_endpoint":{},"topic_name":{}}}}},"variables":{"destination_bucket_name":{},"lambda_function_name":{},"notification_email":{},"runtime":{},"sns_topic_name":{},"source_bucket_name":{}}}},"relevant_attributes":[{"resource":"module.lambda.aws_iam_policy.lambda_extended_policy","attribute":["arn"]},{"resource":"module.sns.aws_sns_topic.notifications","attribute":["arn"]},{"resource":"module.lambda.data.archive_file.lambda_zip","attribute":["output_base64sha256"]},{"resource":"module.lambda.aws_iam_role.lambda_exec","attribute":["arn"]},{"resource":"module.lambda.aws_lambda_function.image_processor","attribute":["function_name"]},{"resource":"module.lambda.aws_lambda_function.image_processor","attribute":["arn"]},{"resource":"module.s3.aws_s3_bucket.source","attribute":["arn"]},{"resource":"module.lambda.data.archive_file.lambda_zip","attribute":["output_path"]},{"resource":"module.lambda.aws_iam_role.lambda_exec","attribute":["name"]},{"resource":"module.lambda.aws_lambda_permission.allow_s3","attribute":[]},{"resource":"module.s3.aws_s3_bucket.source","attribute":["id"]}],"timestamp":"2025-07-15T17:25:13Z","applyable":true,"complete":true,"errored":false}
