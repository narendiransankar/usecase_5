{"format_version":"1.2","terraform_version":"1.12.2","variables":{"destination_bucket_name":{"value":"image-hcl-test-apsouth1-processed-destination"},"lambda_function_name":{"value":"image-processing-lambda"},"notification_email":{"value":"narendiran.sankar@hcltech.com"},"runtime":{"value":"python3.9"},"sns_topic_name":{"value":"image-processing-updates"},"source_bucket_name":{"value":"image-hcl-test-apsouth1-upload-source"}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.lambda.aws_iam_policy.lambda_extended_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","description":"","id":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","name":"lambda-s3-sns-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::image-hcl-test-apsouth1-upload-source/*\",\"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination/*\"]},{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQGACJQFAG63GUDKXY","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::012889719104:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-07-15T15:20:48Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAQGACJQFAOXAIYMNSL"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false],"role_last_used":[{}],"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_extended_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250715152051033700000002","policy_arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250715152048501000000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DEST_BUCKET":"image-hcl-test-apsouth1-processed-destination","SNS_TOPIC":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","id":"image-processing-lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda/invocations","kms_key_arn":"","last_modified":"2025-07-15T15:21:00.524+0000","layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::012889719104:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","source_code_size":814,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}},{"address":"module.lambda.aws_lambda_permission.allow_s3","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"id":"AllowExecutionFromS3","principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","statement_id":"AllowExecutionFromS3","statement_id_prefix":""},"sensitive_values":{}}],"address":"module.lambda"},{"resources":[{"address":"module.s3.aws_s3_bucket.destination","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination","bucket":"image-hcl-test-apsouth1-processed-destination","bucket_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-processed-destination","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.s3.aws_s3_bucket.source","mode":"managed","type":"aws_s3_bucket","name":"source","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","bucket":"image-hcl-test-apsouth1-upload-source","bucket_domain_name":"image-hcl-test-apsouth1-upload-source.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-upload-source.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-upload-source","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.s3.aws_s3_bucket_notification.lambda_trigger","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"image-hcl-test-apsouth1-upload-source","eventbridge":false,"id":"image-hcl-test-apsouth1-upload-source","lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-lambda-20250715152108190600000003","lambda_function_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda"}],"queue":[],"topic":[]},"sensitive_values":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]}}],"address":"module.s3"},{"resources":[{"address":"module.sns.aws_sns_topic.notifications","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"image-processing-updates","name_prefix":"","owner":"012889719104","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"012889719104\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sns.aws_sns_topic_subscription.email","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","owner_id":"012889719104","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"},"sensitive_values":{}}],"address":"module.sns"}]}},"resource_changes":[{"address":"module.lambda.aws_iam_policy.lambda_extended_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","description":"","id":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","name":"lambda-s3-sns-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::image-hcl-test-apsouth1-upload-source/*\",\"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination/*\"]},{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQGACJQFAG63GUDKXY","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","description":"","id":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","name":"lambda-s3-sns-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::image-hcl-test-apsouth1-upload-source/*\",\"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination/*\"]},{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQGACJQFAG63GUDKXY","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_role.lambda_exec","module_address":"module.lambda","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::012889719104:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-07-15T15:20:48Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAQGACJQFAOXAIYMNSL"},"after":{"arn":"arn:aws:iam::012889719104:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-07-15T15:20:48Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAQGACJQFAOXAIYMNSL"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false],"role_last_used":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false],"role_last_used":[{}],"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_extended_attachment","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250715152051033700000002","policy_arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250715152051033700000002","policy_arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250715152048501000000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250715152048501000000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_lambda_function.image_processor","module_address":"module.lambda","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DEST_BUCKET":"image-hcl-test-apsouth1-processed-destination","SNS_TOPIC":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","id":"image-processing-lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda/invocations","kms_key_arn":"","last_modified":"2025-07-15T15:21:00.524+0000","layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::012889719104:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","source_code_size":814,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DEST_BUCKET":"image-hcl-test-apsouth1-processed-destination","SNS_TOPIC":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","id":"image-processing-lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda/invocations","kms_key_arn":"","last_modified":"2025-07-15T15:21:00.524+0000","layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::012889719104:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","source_code_size":814,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.lambda.aws_lambda_permission.allow_s3","module_address":"module.lambda","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"id":"AllowExecutionFromS3","principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","statement_id":"AllowExecutionFromS3","statement_id_prefix":""},"after":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"id":"AllowExecutionFromS3","principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","statement_id":"AllowExecutionFromS3","statement_id_prefix":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.s3.aws_s3_bucket.destination","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination","bucket":"image-hcl-test-apsouth1-processed-destination","bucket_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-processed-destination","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination","bucket":"image-hcl-test-apsouth1-processed-destination","bucket_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-processed-destination","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.s3.aws_s3_bucket.source","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket","name":"source","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","bucket":"image-hcl-test-apsouth1-upload-source","bucket_domain_name":"image-hcl-test-apsouth1-upload-source.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-upload-source.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-upload-source","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","bucket":"image-hcl-test-apsouth1-upload-source","bucket_domain_name":"image-hcl-test-apsouth1-upload-source.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-upload-source.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-upload-source","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"after_unknown":{},"before_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]},"after_sensitive":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.s3.aws_s3_bucket_notification.lambda_trigger","module_address":"module.s3","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"bucket":"image-hcl-test-apsouth1-upload-source","eventbridge":false,"id":"image-hcl-test-apsouth1-upload-source","lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-lambda-20250715152108190600000003","lambda_function_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda"}],"queue":[],"topic":[]},"after":{"bucket":"image-hcl-test-apsouth1-upload-source","eventbridge":false,"id":"image-hcl-test-apsouth1-upload-source","lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-lambda-20250715152108190600000003","lambda_function_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda"}],"queue":[],"topic":[]},"after_unknown":{},"before_sensitive":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]},"after_sensitive":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]}}},{"address":"module.sns.aws_sns_topic.notifications","module_address":"module.sns","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"image-processing-updates","name_prefix":"","owner":"012889719104","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"012889719104\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"image-processing-updates","name_prefix":"","owner":"012889719104","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"012889719104\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sns.aws_sns_topic_subscription.email","module_address":"module.sns","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","owner_id":"012889719104","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"},"after":{"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","owner_id":"012889719104","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.12.2","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.lambda.data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_name":"registry.terraform.io/hashicorp/archive","schema_version":0,"values":{"exclude_symlink_directories":null,"excludes":null,"id":"9a25d34f65f3fc8fb3bfa4cb4a2923f34441beb1","output_base64sha256":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","output_base64sha512":"OImiTN+fK1gTbOxMHuAnuqkH3IO3zVj1dES6mwlxcS0e4DwP+XKThLiu1TZa72Kur//iRFKd/3I8YtHwTaY7cg==","output_file_mode":null,"output_md5":"2c651ad748f881ff4db1608c045fa3bb","output_path":"modules/lambda/lambda_function_payload.zip","output_sha":"9a25d34f65f3fc8fb3bfa4cb4a2923f34441beb1","output_sha256":"aa5eb15a84b7d734422acde0eae3441b5fc6cae4650ec7352eb11b5cb347d8a8","output_sha512":"3889a24cdf9f2b58136cec4c1ee027baa907dc83b7cd58f57444ba9b0971712d1ee03c0ff9729384b8aed5365aef62aeafffe244529dff723c62d1f04da63b72","output_size":814,"source":[],"source_content":null,"source_content_filename":null,"source_dir":"modules/lambda/lambda_function_payload","source_file":null,"type":"zip"},"sensitive_values":{"source":[]}},{"address":"module.lambda.aws_iam_policy.lambda_extended_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","description":"","id":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","name":"lambda-s3-sns-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::image-hcl-test-apsouth1-upload-source/*\",\"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination/*\"]},{\"Action\":\"sns:Publish\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAQGACJQFAG63GUDKXY","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.sns.aws_sns_topic.notifications"]},{"address":"module.lambda.aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::012889719104:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","create_date":"2025-07-15T15:20:48Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":null,"role_last_used":[{"last_used_date":"","region":""}],"tags":{},"tags_all":{},"unique_id":"AROAQGACJQFAOXAIYMNSL"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false],"role_last_used":[{}],"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_extended_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250715152051033700000002","policy_arn":"arn:aws:iam::012889719104:policy/lambda-s3-sns-policy","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_policy.lambda_extended_policy","module.lambda.aws_iam_role.lambda_exec","module.sns.aws_sns_topic.notifications"]},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250715152048501000000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_role.lambda_exec"]},{"address":"module.lambda.aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DEST_BUCKET":"image-hcl-test-apsouth1-processed-destination","SNS_TOPIC":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/lambda_function_payload.zip","function_name":"image-processing-lambda","handler":"image_processor.lambda_handler","id":"image-processing-lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda/invocations","kms_key_arn":"","last_modified":"2025-07-15T15:21:00.524+0000","layers":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::012889719104:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"ql6xWoS31zRCKs3g6uNEG1/GyuRlDsc1LrEbXLNH2Kg=","source_code_size":814,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.data.archive_file.lambda_zip","module.sns.aws_sns_topic.notifications"]},{"address":"module.lambda.aws_lambda_permission.allow_s3","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"image-processing-lambda","function_url_auth_type":null,"id":"AllowExecutionFromS3","principal":"s3.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","statement_id":"AllowExecutionFromS3","statement_id_prefix":""},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.image_processor","module.lambda.data.archive_file.lambda_zip","module.s3.aws_s3_bucket.source","module.sns.aws_sns_topic.notifications"]}],"address":"module.lambda"},{"resources":[{"address":"module.s3.aws_s3_bucket.destination","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-processed-destination","bucket":"image-hcl-test-apsouth1-processed-destination","bucket_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-processed-destination.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-processed-destination","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.s3.aws_s3_bucket.source","mode":"managed","type":"aws_s3_bucket","name":"source","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acceleration_status":"","acl":null,"arn":"arn:aws:s3:::image-hcl-test-apsouth1-upload-source","bucket":"image-hcl-test-apsouth1-upload-source","bucket_domain_name":"image-hcl-test-apsouth1-upload-source.s3.amazonaws.com","bucket_prefix":"","bucket_regional_domain_name":"image-hcl-test-apsouth1-upload-source.s3.ap-south-1.amazonaws.com","cors_rule":[],"force_destroy":false,"grant":[{"id":"9ce7350ff721ee68568b3e4cc3a4b9791c27148380c4af6649aff10f5e3198be","permissions":["FULL_CONTROL"],"type":"CanonicalUser","uri":""}],"hosted_zone_id":"Z11RGJOFQNVJUP","id":"image-hcl-test-apsouth1-upload-source","lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"object_lock_enabled":false,"policy":"","region":"ap-south-1","replication_configuration":[],"request_payer":"BucketOwner","server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":false}]}],"tags":{},"tags_all":{},"timeouts":null,"versioning":[{"enabled":false,"mfa_delete":false}],"website":[],"website_domain":null,"website_endpoint":null},"sensitive_values":{"cors_rule":[],"grant":[{"permissions":[false]}],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"module.s3.aws_s3_bucket_notification.lambda_trigger","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"image-hcl-test-apsouth1-upload-source","eventbridge":false,"id":"image-hcl-test-apsouth1-upload-source","lambda_function":[{"events":["s3:ObjectCreated:*"],"filter_prefix":"","filter_suffix":"","id":"tf-s3-lambda-20250715152108190600000003","lambda_function_arn":"arn:aws:lambda:ap-south-1:012889719104:function:image-processing-lambda"}],"queue":[],"topic":[]},"sensitive_values":{"lambda_function":[{"events":[false]}],"queue":[],"topic":[]},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.image_processor","module.lambda.aws_lambda_permission.allow_s3","module.lambda.data.archive_file.lambda_zip","module.s3.aws_s3_bucket.source","module.sns.aws_sns_topic.notifications"]}],"address":"module.s3"},{"resources":[{"address":"module.sns.aws_sns_topic.notifications","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"image-processing-updates","name_prefix":"","owner":"012889719104","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"012889719104\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:ap-south-1:012889719104:image-processing-updates\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sns.aws_sns_topic_subscription.email","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":false,"delivery_policy":"","endpoint":"narendiran.sankar@hcltech.com","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates:9f46b018-698c-43d6-b7e6-baaf84121483","owner_id":"012889719104","pending_confirmation":true,"protocol":"email","raw_message_delivery":false,"redrive_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:ap-south-1:012889719104:image-processing-updates"},"sensitive_values":{},"depends_on":["module.sns.aws_sns_topic.notifications"]}],"address":"module.sns"}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"~\u003e 2.2"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 4.0","expressions":{"region":{"constant_value":"ap-south-1"}}}},"root_module":{"module_calls":{"lambda":{"source":"./modules/lambda","expressions":{"destination_bucket_name":{"references":["var.destination_bucket_name"]},"handler_name":{"constant_value":"image_processor.lambda_handler"},"lambda_function_name":{"references":["var.lambda_function_name"]},"lambda_s3_trigger_arn":{"references":["module.s3.source_bucket_arn","module.s3"]},"runtime":{"references":["var.runtime"]},"sns_topic_arn":{"references":["module.sns.topic_arn","module.sns"]},"source_bucket_name":{"references":["var.source_bucket_name"]}},"module":{"outputs":{"allow_s3":{"expression":{"references":["aws_lambda_permission.allow_s3"]}},"lambda_function_arn":{"expression":{"references":["aws_lambda_function.image_processor.arn","aws_lambda_function.image_processor"]}}},"resources":[{"address":"aws_iam_policy.lambda_extended_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_extended_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"lambda-s3-sns-policy"},"policy":{"references":["var.source_bucket_name","var.destination_bucket_name","var.sns_topic_arn"]}},"schema_version":0},{"address":"aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"lambda_exec_role"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_extended_attachment","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_extended_attachment","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_extended_policy.arn","aws_iam_policy.lambda_extended_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_lambda_function.image_processor","mode":"managed","type":"aws_lambda_function","name":"image_processor","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["var.destination_bucket_name","var.sns_topic_arn"]}}],"filename":{"references":["data.archive_file.lambda_zip.output_path","data.archive_file.lambda_zip"]},"function_name":{"references":["var.lambda_function_name"]},"handler":{"references":["var.handler_name"]},"layers":{"constant_value":["arn:aws:lambda:ap-south-1:770693421928:layer:Klayers-p39-pillow:1"]},"role":{"references":["aws_iam_role.lambda_exec.arn","aws_iam_role.lambda_exec"]},"runtime":{"references":["var.runtime"]},"source_code_hash":{"references":["data.archive_file.lambda_zip.output_base64sha256","data.archive_file.lambda_zip"]}},"schema_version":0},{"address":"aws_lambda_permission.allow_s3","mode":"managed","type":"aws_lambda_permission","name":"allow_s3","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["aws_lambda_function.image_processor.function_name","aws_lambda_function.image_processor"]},"principal":{"constant_value":"s3.amazonaws.com"},"source_arn":{"references":["var.lambda_s3_trigger_arn"]},"statement_id":{"constant_value":"AllowExecutionFromS3"}},"schema_version":0},{"address":"data.archive_file.lambda_zip","mode":"data","type":"archive_file","name":"lambda_zip","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source_dir":{"references":["path.module"]},"type":{"constant_value":"zip"}},"schema_version":0}],"variables":{"destination_bucket_name":{},"handler_name":{},"lambda_function_name":{},"lambda_s3_trigger_arn":{},"runtime":{},"sns_topic_arn":{},"source_bucket_name":{}}}},"s3":{"source":"./modules/s3","expressions":{"destination_bucket_name":{"references":["var.destination_bucket_name"]},"lambda_function_arn":{"references":["module.lambda.lambda_function_arn","module.lambda"]},"lambda_permission_dependency":{"references":["module.lambda.allow_s3","module.lambda"]},"source_bucket_name":{"references":["var.source_bucket_name"]}},"module":{"outputs":{"source_bucket_arn":{"expression":{"references":["aws_s3_bucket.source.arn","aws_s3_bucket.source"]}}},"resources":[{"address":"aws_s3_bucket.destination","mode":"managed","type":"aws_s3_bucket","name":"destination","provider_config_key":"aws","expressions":{"bucket":{"references":["var.destination_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket.source","mode":"managed","type":"aws_s3_bucket","name":"source","provider_config_key":"aws","expressions":{"bucket":{"references":["var.source_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket_notification.lambda_trigger","mode":"managed","type":"aws_s3_bucket_notification","name":"lambda_trigger","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.source.id","aws_s3_bucket.source"]},"lambda_function":[{"events":{"constant_value":["s3:ObjectCreated:*"]},"lambda_function_arn":{"references":["var.lambda_function_arn"]}}]},"schema_version":0,"depends_on":["aws_s3_bucket.source","var.lambda_permission_dependency"]}],"variables":{"destination_bucket_name":{},"lambda_function_arn":{},"lambda_permission_dependency":{"default":null},"source_bucket_name":{}}}},"sns":{"source":"./modules/sns","expressions":{"email_endpoint":{"references":["var.notification_email"]},"topic_name":{"references":["var.sns_topic_name"]}},"module":{"outputs":{"topic_arn":{"expression":{"references":["aws_sns_topic.notifications.arn","aws_sns_topic.notifications"]}}},"resources":[{"address":"aws_sns_topic.notifications","mode":"managed","type":"aws_sns_topic","name":"notifications","provider_config_key":"aws","expressions":{"name":{"references":["var.topic_name"]}},"schema_version":0},{"address":"aws_sns_topic_subscription.email","mode":"managed","type":"aws_sns_topic_subscription","name":"email","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.email_endpoint"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.notifications.arn","aws_sns_topic.notifications"]}},"schema_version":0}],"variables":{"email_endpoint":{},"topic_name":{}}}}},"variables":{"destination_bucket_name":{},"lambda_function_name":{},"notification_email":{},"runtime":{},"sns_topic_name":{},"source_bucket_name":{}}}},"relevant_attributes":[{"resource":"module.lambda.aws_lambda_function.image_processor","attribute":["arn"]},{"resource":"module.sns.aws_sns_topic.notifications","attribute":["arn"]},{"resource":"module.lambda.aws_lambda_function.image_processor","attribute":["function_name"]},{"resource":"module.lambda.aws_lambda_permission.allow_s3","attribute":[]},{"resource":"module.s3.aws_s3_bucket.source","attribute":["arn"]}],"timestamp":"2025-07-15T16:26:45Z","applyable":false,"complete":true,"errored":false}
